<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DJ CAVALLO</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: radial-gradient(circle at center, #1e1e1e, #000000);
      overflow: hidden;
      font-family: 'Orbitron', sans-serif;
      height: 100vh;
      position: relative;
      color: white;
    }
    .title, .subtitle {
      text-align: center;
      position: relative;
      z-index: 5;
      transition: all 0.3s ease;
      color: #ff66cc;
      text-shadow: 0 0 5px #ff66cc;
    }
    .subsub {
      text-align: right;
      position: absolute;
      bottom: 5vh;
      right: 5vh;
      z-index: 5;
      transition: all 0.3s ease;
      color: #21a4fb;
      text-shadow: 0 0 5px #138ef9;
    }
    .subsub a {
    color: inherit;            /* usa il colore del div (es. #ff66cc) */
    text-decoration: none;     /* rimuove la sottolineatura */
    text-shadow: inherit;      /* eredita il glow */
    transition: inherit;       /* mantiene la transizione */
}
    .title { font-size: 3rem; margin-top: 2rem; }
    .subtitle { font-size: 1.5rem; }
    .subsub { font-size: 2vmin; }
    .active-glow .title {
      color: #ff0033;
      text-shadow: 0 0 20px #ff0033, 0 0 40px #ffffff;
    }
    .active-glow .subtitle {
      color: #ff0033;
      text-shadow: 0 0 15px #ffffff;
    }
    .active-glow .subsub {
      color: #3579ff;
      text-shadow: 0 0 15px #ffffff;
    }
    #laser-svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 3;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    #laser-svg.active { opacity: 0.7; }
    #dj-caballo {
      width: 35vmin;
      height: 35vmin;
      background-image: url('/dj-caballo.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      position: absolute;
      z-index: 4;
      cursor: pointer;
      will-change: transform;
      filter: drop-shadow(0 0 3px #ff66cc);
      transition: filter 0.3s ease;
    }
    #dj-caballo.glow {
      filter: drop-shadow(0 0 25px #ffffff) brightness(1.2);
    }
   
    #visualizer {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 10vh;
      z-index: 3;
    }
    .crowd {
      top: 54vh;
      position: absolute;
      width: 80%;
      display: grid;
      left: 50%;
      transform: translateX(-50%);
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
    }

    .dancer {
      width: 12vmin;
      height: auto;
      animation: bounce 1s infinite ease-in-out;
      opacity: 0;
    }
    .dancer.active {
      opacity: 1;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-17px); }
    }
  </style>
</head>
<body>

  <div class="title">DJ CAVALLO</div>
  <div class="subtitle">COMING SOON</div>
  <div class="subsub"><a href="https://yhwh-node.com">yhwh-node.com</a></div>

  <svg id="laser-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
    <defs>
      <linearGradient id="sunset" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#ff9a00" />
        <stop offset="50%" stop-color="#ff004c" />
        <stop offset="100%" stop-color="#ff0033" />
      </linearGradient>
    </defs>
    <filter id="laser-glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="2.5" result="blur" />
      <feMerge>
        <feMergeNode in="blur" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
    <g stroke="url(#sunset)" stroke-width="0.4" opacity="0.6">
      <!-- Fascio 1: verso centro a (50,50) -->
    <line x1="0" y1="0" x2="90" y2="50">
      <animate attributeName="x2" values="70;75;80" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="50;52;50" dur="2s" repeatCount="indefinite"/>
    </line>
    <line x1="5" y1="0" x2="90" y2="50">
      <animate attributeName="x2" values="70;75;80" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="50;52;50" dur="2s" repeatCount="indefinite"/>
    </line>
    <line x1="10" y1="0" x2="90" y2="50">
      <animate attributeName="x2" values="70;75;80" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="50;52;50" dur="2s" repeatCount="indefinite"/>
    </line>
    <line x1="15" y1="0" x2="90" y2="50">
      <animate attributeName="x2" values="70;75;80" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="50;52;50" dur="2s" repeatCount="indefinite"/>
    </line>
    <line x1="20" y1="0" x2="90" y2="50">
      <animate attributeName="x2" values="70;75;80" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="50;52;50" dur="2s" repeatCount="indefinite"/>
    </line>
    <line x1="25" y1="0" x2="90" y2="50">
      <animate attributeName="x2" values="70;75;80" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="50;52;50" dur="2s" repeatCount="indefinite"/>
    </line>
    <line x1="30" y1="0" x2="90" y2="50">
      <animate attributeName="x2" values="70;75;80" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="50;52;50" dur="2s" repeatCount="indefinite"/>
    </line>
  
      <!-- Fascio 2: verso (50,60) -->
      <!-- Fascio 2: simmetrico verso il centro, y2 = 50 -->
      <line x1="35" y1="0" x2="45" y2="50">
        <animate attributeName="y2" values="50;52;50" dur="2.1s" repeatCount="indefinite"/>
      </line>
      <line x1="40" y1="0" x2="47.5" y2="50">
        <animate attributeName="y2" values="50;52;50" dur="2.1s" repeatCount="indefinite"/>
      </line>
      <line x1="45" y1="0" x2="49" y2="50">
        <animate attributeName="y2" values="50;52;50" dur="2.1s" repeatCount="indefinite"/>
      </line>
      <line x1="50" y1="0" x2="50" y2="50">
        <animate attributeName="y2" values="50;52;50" dur="2.1s" repeatCount="indefinite"/>
      </line>
      <line x1="55" y1="0" x2="51" y2="50">
        <animate attributeName="y2" values="50;52;50" dur="2.1s" repeatCount="indefinite"/>
      </line>
      <line x1="60" y1="0" x2="52.5" y2="50">
        <animate attributeName="y2" values="50;52;50" dur="2.1s" repeatCount="indefinite"/>
      </line>
      <line x1="65" y1="0" x2="55" y2="50">
        <animate attributeName="y2" values="50;52;50" dur="2.1s" repeatCount="indefinite"/>
      </line>
  
      <!-- Fascio 3: verso (50,70) -->
      <!-- Fascio 3: punta verso sinistra, Y resta intorno a 50 -->
      <line x1="70" y1="0" x2="10" y2="50">
        <animate attributeName="x2" values="20;25;30" dur="2.2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="50;48;50" dur="2.2s" repeatCount="indefinite"/>
      </line>
      <line x1="75" y1="0" x2="10" y2="50">
        <animate attributeName="x2" values="20;25;30" dur="2.2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="50;48;50" dur="2.2s" repeatCount="indefinite"/>
      </line>
      <line x1="80" y1="0" x2="10" y2="50">
        <animate attributeName="x2" values="20;25;30" dur="2.2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="50;48;50" dur="2.2s" repeatCount="indefinite"/>
      </line>
      <line x1="85" y1="0" x2="10" y2="50">
        <animate attributeName="x2" values="20;25;30" dur="2.2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="50;48;50" dur="2.2s" repeatCount="indefinite"/>
      </line>
      <line x1="90" y1="0" x2="10" y2="50">
        <animate attributeName="x2" values="20;25;30" dur="2.2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="50;48;50" dur="2.2s" repeatCount="indefinite"/>
      </line>
      <line x1="95" y1="0" x2="10" y2="50">
        <animate attributeName="x2" values="20;25;30" dur="2.2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="50;48;50" dur="2.2s" repeatCount="indefinite"/>
      </line>
      <line x1="100" y1="0" x2="10" y2="50">
        <animate attributeName="x2" values="20;25;30" dur="2.2s" repeatCount="indefinite"/>
        <animate attributeName="y2" values="50;48;50" dur="2.2s" repeatCount="indefinite"/>
      </line>
    </g>
  </svg>

  <div id="dj-caballo"></div>

  <div class="crowd">
    <img src="/animal2.png" class="dancer" style="animation-delay: 0.61s;" />
    <img src="/animal3.png" class="dancer" style="animation-delay: 0.32s;" />
    <img src="/animal1.png" class="dancer" style="animation-delay: 0.20s;" />
    <img src="/animal1.png" class="dancer" style="animation-delay: 0.47s;" />
    <img src="/animal5.png" class="dancer" style="animation-delay: 0.76s;" />
    <img src="/animal2.png" class="dancer" style="animation-delay: 0.44s;" />
    <img src="/animal3.png" class="dancer" style="animation-delay: 0.08s;" />
                      
    <img src="/animal3.png" class="dancer" style="animation-delay: 0.28s;" />
    <img src="/animal1.png" class="dancer" style="animation-delay: 0.76s;" />
    <img src="/animal2.png" class="dancer" style="animation-delay: 0.57s;" />
    <img src="/animal4.png" class="dancer" style="animation-delay: 0.60s;" />
    <img src="/animal5.png" class="dancer" style="animation-delay: 0.29s;" />
    <img src="/animal1.png" class="dancer" style="animation-delay: 0.67s;" />
    <img src="/animal4.png" class="dancer" style="animation-delay: 0.74s;" />
                
    <img src="/animal5.png" class="dancer" style="animation-delay: 0.97s;" />
    <img src="/animal2.png" class="dancer" style="animation-delay: 0.32s;" />
    <img src="/animal1.png" class="dancer" style="animation-delay: 0.96s;" />
    <img src="/animal5.png" class="dancer" style="animation-delay: 0.1s;" />
    <img src="/animal3.png" class="dancer" style="animation-delay: 0.78s;" />
    <img src="/animal1.png" class="dancer" style="animation-delay: 0.66s;" />
    <img src="/animal2.png" class="dancer" style="animation-delay: 0.61s;" />
  </div>

  <audio id="dj-audio" src="/musica.mp3"></audio>
  <canvas id="visualizer"></canvas>

  <script>
    const caballo = document.getElementById("dj-caballo");
    const audio = document.getElementById("dj-audio");
    const visualizer = document.getElementById("visualizer");
    const ctx = visualizer.getContext("2d");
    const smoke = document.getElementById("smoke-svg");
    const laser = document.getElementById("laser-svg");
    const body = document.body;
    const dancers = document.querySelectorAll(".dancer");
    let audioCtx, analyser, source, dataArray, bufferLength, animating = false;
    let mouseX = window.innerWidth / 2;
    let mouseY = window.innerHeight / 2;
    let currentX = mouseX;
    let currentY = mouseY;
    const halfSize = 300;
    document.addEventListener("mousemove", (e) => {
      mouseX = e.clientX ;
      mouseY = e.clientY ;



  
    });
    function animateCaballo() {
  currentX += (mouseX - currentX) * 0.1;
  currentY += (mouseY - currentY) * 0.1;
  caballo.style.transform = `translate3d(${currentX - caballo.offsetWidth / 2}px, ${currentY - caballo.offsetHeight }px, 0)`;
  requestAnimationFrame(animateCaballo);
}
    animateCaballo();
    function setupAudio() {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioCtx.createAnalyser();
      source = audioCtx.createMediaElementSource(audio);
      source.connect(analyser);
      analyser.connect(audioCtx.destination);
      analyser.fftSize = 64;
      bufferLength = analyser.frequencyBinCount;
      dataArray = new Uint8Array(bufferLength);
    }
    function drawBars() {
      if (!animating) return;
      requestAnimationFrame(drawBars);
      analyser.getByteFrequencyData(dataArray);
      ctx.clearRect(0, 0, visualizer.width, visualizer.height);
      const barWidth = visualizer.width / bufferLength;
      dataArray.forEach((value, i) => {
        const barHeight = value;
        const x = i * barWidth;
        ctx.fillStyle = `rgba(255, 50, 100, 0.8)`;
        ctx.fillRect(x, visualizer.height - barHeight, barWidth - 1, barHeight);
      });
    }
    function toggleMusic() {
      if (!audioCtx) setupAudio();
      if (audio.paused) {
        audio.play();
        audioCtx.resume();
        animating = true;
        caballo.classList.add("glow");
        laser.classList.add("active");
        body.classList.add("active-glow");
        dancers.forEach(d => d.classList.add("active"));
        drawBars();
      } else {
        audio.pause();
        animating = false;
        caballo.classList.remove("glow");
        laser.classList.remove("active");
        body.classList.remove("active-glow");
        dancers.forEach(d => d.classList.remove("active"));
        ctx.clearRect(0, 0, visualizer.width, visualizer.height);
      }
    }
    caballo.addEventListener("click", toggleMusic);
    function resizeCanvas() {
      visualizer.width = window.innerWidth;
      visualizer.height = 100;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();
  </script>
</body>
</html>